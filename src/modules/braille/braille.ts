// Dot numbering (standard):
// 1 4
// 2 5
// 3 6
export function dotsToMask(dots: boolean[]): number {
  let m = 0;
  for (let i = 0; i < 6; i++) {
    if (dots[i]) m |= 1 << i;
  }
  return m;
}

const MASK_TO_LETTER: Record<number, string> = {
  // a-j
  [1 << 0]: "A",
  [(1 << 0) | (1 << 1)]: "B",
  [(1 << 0) | (1 << 3)]: "C",
  [(1 << 0) | (1 << 3) | (1 << 4)]: "D",
  [(1 << 0) | (1 << 4)]: "E",
  [(1 << 0) | (1 << 1) | (1 << 3)]: "F",
  [(1 << 0) | (1 << 1) | (1 << 3) | (1 << 4)]: "G",
  [(1 << 0) | (1 << 1) | (1 << 4)]: "H",
  [(1 << 1) | (1 << 3)]: "I",
  [(1 << 1) | (1 << 3) | (1 << 4)]: "J",
  // k-t (add dot3)
  [(1 << 0) | (1 << 2)]: "K",
  [(1 << 0) | (1 << 1) | (1 << 2)]: "L",
  [(1 << 0) | (1 << 2) | (1 << 3)]: "M",
  [(1 << 0) | (1 << 2) | (1 << 3) | (1 << 4)]: "N",
  [(1 << 0) | (1 << 2) | (1 << 4)]: "O",
  [(1 << 0) | (1 << 1) | (1 << 2) | (1 << 3)]: "P",
  [(1 << 0) | (1 << 1) | (1 << 2) | (1 << 3) | (1 << 4)]: "Q",
  [(1 << 0) | (1 << 1) | (1 << 2) | (1 << 4)]: "R",
  [(1 << 1) | (1 << 2) | (1 << 3)]: "S",
  [(1 << 1) | (1 << 2) | (1 << 3) | (1 << 4)]: "T",
  // u-z (add dot6) + w special
  [(1 << 0) | (1 << 2) | (1 << 5)]: "U",
  [(1 << 0) | (1 << 1) | (1 << 2) | (1 << 5)]: "V",
  [(1 << 1) | (1 << 3) | (1 << 4) | (1 << 5)]: "W",
  [(1 << 0) | (1 << 2) | (1 << 3) | (1 << 5)]: "X",
  [(1 << 0) | (1 << 2) | (1 << 3) | (1 << 4) | (1 << 5)]: "Y",
  [(1 << 0) | (1 << 2) | (1 << 4) | (1 << 5)]: "Z"
};

export function maskToLetter(mask: number): string | null {
  return MASK_TO_LETTER[mask] ?? null;
}

